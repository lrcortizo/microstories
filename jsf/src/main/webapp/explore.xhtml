<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<ui:composition template="/template/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
	<ui:define name="content">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="formExplorer">
						<p class="titleForm"> I want see:</p>
						  <f:metadata>
					       <f:viewParam name="theme" value="#{explore.theme}"/>
					       <f:viewParam name="genre" value="#{explore.genre}"/>
					       <f:viewParam name="date" value="#{explore.date}"/>
					       <f:viewParam name="nPagination" value="#{explore.nPagination}"/>

					    </f:metadata>
					  	<h:form class="form-inline">
			            	<label>stories about</label>
						    <h:selectOneMenu value="#{explore.theme}" class="form-control elementExplore" required="true">
						        <f:selectItem itemValue="All" />
						        <f:selectItem itemValue="ADVENTURE" />
						        <f:selectItem itemValue="SCIENCEFICTION" />
						        <f:selectItem itemValue="HISTORY" />
						        <f:selectItem itemValue="CHILDREN" />
						        <f:selectItem itemValue="ROMANTIC" />
						        <f:selectItem itemValue="THRILLER" />
						        <f:selectItem itemValue="HORROR" />
						    </h:selectOneMenu>
						    <label>of type</label>
						    <h:selectOneMenu value="#{explore.genre}" class="form-control elementExplore" required="true">
						        <f:selectItem itemValue="All" />
						        <f:selectItem itemValue="STORY" />
						        <f:selectItem itemValue="POETRY" />
						        <f:selectItem itemValue="NANOSTORY" />
						    </h:selectOneMenu>
						    <label class="elementExplore">after of</label>
						    <div id="exploreDate">
						    	<h:inputText class="form-control" a:placeholder="2018-01-01" value="#{explore.date}" />
						    </div> 
			            	<h:commandButton value="submit" class="btn btn-primary elementExplore" action="explore?faces-redirect=true&amp;includeViewParams=true">
			            	</h:commandButton>
			        	</h:form>
						 
					</div>
				</div>
			</div>
			<div class="row">
				<ui:fragment rendered="#{empty explore.listSearchPagination()}">
					<div class="col-md-12">
						<p class="warning">No microstories to show</p>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{not empty explore.listSearchPagination()}">
					<ui:repeat var="story" value="#{explore.listSearchPagination()}">
						<div class="col-md-4 col-sm-6 col-xs-12">
							<h:form>
								<h:outputLink value="view.xhtml">

									<f:param name="id" value="#{story.id}" />

									<div class="card mb-4 box-shadow indexTarget">
										<div class="card-header">
											<div class="gender">
												<h:outputLabel value="#{story.genre}" />
											</div>
										</div>
										<div class="card-body">
											<div class="title">
												<h:outputLabel value="#{story.title}" />
											</div>
											<div class="thematics">
												<h:outputLabel value="#{story.primaryTheme}" />
												,
												<h:outputLabel value="#{story.secondaryTheme}" />
											</div>
											<p class="card-text">${fn:substring(story.text, 0, 60)}...</p>
											<div class="date">
												date:
												<h:outputLabel value="#{story.publicationDate}" />
											</div>
										</div>
										<div class="card-footer">
											<div class="autor">
												by:	
												<h:outputLabel value="#{story.author}" />
											</div>
										</div>
									</div>
								</h:outputLink>
							</h:form>
						</div>
					</ui:repeat>
				</ui:fragment>
			</div>
			<div class="row">
				<div class="col-md-12">
				
                
					<nav aria-label="Page navigation example">
					<ul class="pagination justify-content-center">
						<li class="page-item">
							<h:outputLink styleClass="page-link" value="explore.xhtml" >
			                	<f:param name="genre" value="#{explore.genre}" />
			                	<f:param name="theme" value="#{explore.theme}" />
			                	<f:param name="date" value="#{explore.date}" />
								<f:param name="nPagination" value="#{explore.nPagination-1}" />
								Previus
							</h:outputLink>  
						</li>
						<li class="page-item">
							<h:outputLink styleClass="page-link" value="explore.xhtml" >
			                	<f:param name="genre" value="#{explore.genre}" />
			                	<f:param name="theme" value="#{explore.theme}" />
			                	<f:param name="date" value="#{explore.date}" />
								<f:param name="nPagination" value="1" />
								1
							</h:outputLink>  
						</li>
						<li class="page-item">
							<h:outputLink styleClass="page-link" value="explore.xhtml" >
			                	<f:param name="genre" value="#{explore.genre}" />
			                	<f:param name="theme" value="#{explore.theme}" />
			                	<f:param name="date" value="#{explore.date}" />
								<f:param name="nPagination" value="2" />
								2
							</h:outputLink>  
						</li>
						<li class="page-item">
							<h:outputLink styleClass="page-link" value="explore.xhtml" >
			                	<f:param name="genre" value="#{explore.genre}" />
			                	<f:param name="theme" value="#{explore.theme}" />
			                	<f:param name="date" value="#{explore.date}" />
								<f:param name="nPagination" value="3" />
								3
							</h:outputLink>  
						</li>
						<li class="page-item">
							<h:outputLink styleClass="page-link" value="explore.xhtml" >
			                	<f:param name="genre" value="#{explore.genre}" />
			                	<f:param name="theme" value="#{explore.theme}" />
			                	<f:param name="date" value="#{explore.date}" />
								<f:param name="nPagination" value="#{explore.nPagination+1}" />
								Next
							</h:outputLink>  
						</li>
					</ul>
					</nav>
				</div>
			</div>
		</div>
	</ui:define>
</ui:composition>
