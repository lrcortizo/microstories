<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition template="/template/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	

	

	
	<ui:define name="content">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="carroussel" class="carousel slide" data-ride="carousel">
						<ol class="carousel-indicators">
							<li data-target="#carroussel" data-slide-to="0" class="active"></li>
							<li data-target="#carroussel" data-slide-to="1" class=""></li>
							<li data-target="#carroussel" data-slide-to="2" class=""></li>
							<li data-target="#carroussel" data-slide-to="3" class=""></li>
							<li data-target="#carroussel" data-slide-to="4" class=""></li>
							<li data-target="#carroussel" data-slide-to="5" class=""></li>
							
						</ol>
						<div class="carousel-inner">
							<ui:repeat var="storySlide" varStatus="storySlideStatus" value="#{index.mostPopularStories()}">
								
								<h:panelGroup rendered="#{storySlideStatus.first}">
								    <div class="carousel-item active">
								    	<div class="contentImage">
										    <h:panelGroup rendered="${storySlide.genre == 'STORY'}">
													<img src="img/story.jpg" width="1200" />
											</h:panelGroup>
											<h:panelGroup rendered="${storySlide.genre == 'POETRY'}">
													<img src="img/poetry.jpg" width="1200" />
											</h:panelGroup>
											<h:panelGroup rendered="${storySlide.genre == 'NANOSTORY'}">
													<img src="img/story.jpg" width="1200" />
											</h:panelGroup>
										</div>
									    
										<div class="carousel-caption">
											<h:outputLink value="view.xhtml">
												<f:param name="id" value="#{storySlide.id}" />
												<h2 class="titleCarrousel"><h:outputLabel value="#{storySlide.title}" /></h2>
												<p> <span class="genreCarrousel"><h:outputLabel value="#{storySlide.genre}" /></span></p>
												<p class="textCarrousel">${fn:substring(storySlide.text, 0, 30)}...</p>
											</h:outputLink>
										</div>
									</div>
								</h:panelGroup>
								<h:panelGroup rendered="#{not storySlideStatus.first}">
								    <div class="carousel-item">
										<div class="contentImage">
										    <h:panelGroup rendered="${storySlide.genre == 'STORY'}">
													<img src="img/story.jpg" width="1200" />
											</h:panelGroup>
											<h:panelGroup rendered="${storySlide.genre == 'POETRY'}">
													<img src="img/poetry.jpg" width="1200" />
											</h:panelGroup>
											<h:panelGroup rendered="${storySlide.genre == 'NANOSTORY'}">
													<img src="img/nanostory.jpg" width="1200" />
											</h:panelGroup>
										</div>
										<div class="carousel-caption">
											<h:outputLink value="view.xhtml">
												<f:param name="id" value="#{storySlide.id}" />
												<h2 class="titleCarrousel"><h:outputLabel value="#{storySlide.title}" /></h2>
												<p> <span class="genreCarrousel"><h:outputLabel value="#{storySlide.genre}" /></span></p>
												<p class="textCarrousel">${fn:substring(storySlide.text, 0, 30)}...</p>
											</h:outputLink>
										</div>
									</div>
								</h:panelGroup>
							</ui:repeat>
						</div>
					</div>
				</div>
			</div>
			<hr />

			<div>
				<h:button value="EXPLORER" class="btn btn-explorer" outcome="explore.xhtml" />
			</div>
			<div class="row">
				<ui:fragment rendered="#{empty index.listRecentStories()}">
					<div class="col-md-12">
						<p class="warning">No microstories to show</p>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{not empty index.listRecentStories()}">
				
					<ui:repeat var="story" value="#{index.listRecentStories()}">
						<ui:include src="/template/cardTemplate.xhtml" />
					</ui:repeat>
				</ui:fragment>
			</div>
		</div>
	</ui:define>
</ui:composition>
